(function(t){function e(e){for(var a,c,n=e[0],l=e[1],o=e[2],m=0,p=[];m<n.length;m++)c=n[m],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,o||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},i={app:0},r=[];function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var o=0;o<n.length;o++)e(n[o]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),i=s.n(a);i.a},1724:function(t,e,s){},2832:function(t,e,s){"use strict";var a=s("ef0e"),i=s.n(a);i.a},"52a1":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("el-container",{staticClass:"layout"},[s("el-header",{staticClass:"layout-header"},[s("LayoutHeader")],1),s("el-container",{staticClass:"layout-content"},[s("el-aside",{staticClass:"layout-aside",attrs:{width:"240px"}},[s("LayoutAside")],1),s("el-main",{staticClass:"layout-main"},[s("router-view")],1)],1)],1)],1)},r=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[t._m(0),s("div",{staticClass:"search"},[s("div",{staticClass:"mdui-textfield"},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchKey,expression:"searchKey",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text",placeholder:"搜索内容或链接"},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logo"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("live_help")])]),s("span",[t._v("反馈平台")])])}],l=(s("25f0"),s("466d"),{name:"",mounted(){const{searchKey:t=""}=this.$route.query;this.$store.commit("update:searchKey",t)},data:()=>({searchKeyTimer:0}),computed:{searchKey:{get(){return this.$store.state.searchKey},set(t){clearTimeout(this.searchKeyTimer),this.searchKeyTimer=setTimeout(()=>{let e=t;const s=t.match(/(?<=searchKey=)\w{24}/);s&&(e=s.toString());const a=t.match(/(?<=task\/)\w{24}/);a&&(e=a.toString()),this.$store.commit("update:searchKey",e),"/list"===this.$route.path&&this.$route.query.searchKey===e||this.$router.push({path:"/list",query:{searchKey:e}})},100)}}}}),o=l,u=(s("2832"),s("2877")),m=Object(u["a"])(o,c,n,!1,null,"75530767",null),p=m.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"aside"}},[s("ul",{staticClass:"mdui-list mdui-collapse mdui-list-dense",attrs:{"mdui-collapse":""}},[s("li",{staticClass:"mdui-subheader-inset optionTitle"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons",staticStyle:{"margin-bottom":"2px"}},[t._v("fullscreen")]),t._v(" 提出部门 "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清空筛选",placement:"top"}},[s("span",{staticClass:"emptySelectBtn",on:{click:function(e){return t.emptySelect("department")}}},[t._v("×")])])],1),t._l(t.problemOfDepartments,(function(e){return s("li",{key:e,staticClass:"mdui-list-item mdui-ripple options"},[s("div",{staticClass:"mdui-list-item-content"},[t._v("- "+t._s(e))]),s("label",{staticClass:"mdui-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectProblemOfDepartments,expression:"selectProblemOfDepartments"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.selectProblemOfDepartments)?t._i(t.selectProblemOfDepartments,e)>-1:t.selectProblemOfDepartments},on:{change:function(s){var a=t.selectProblemOfDepartments,i=s.target,r=!!i.checked;if(Array.isArray(a)){var c=e,n=t._i(a,c);i.checked?n<0&&(t.selectProblemOfDepartments=a.concat([c])):n>-1&&(t.selectProblemOfDepartments=a.slice(0,n).concat(a.slice(n+1)))}else t.selectProblemOfDepartments=r}}}),s("i",{staticClass:"mdui-switch-icon"})])])})),s("li",{staticClass:"mdui-subheader-inset optionTitle"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons",staticStyle:{"margin-bottom":"2px"}},[t._v("star")]),t._v(" 问题平台 "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清空筛选",placement:"top"}},[s("span",{staticClass:"emptySelectBtn",on:{click:function(e){return t.emptySelect("platforms")}}},[t._v("×")])])],1),t._l(t.platforms,(function(e){return s("li",{key:e,staticClass:"mdui-list-item mdui-ripple options platform"},[s("div",{staticClass:"mdui-list-item-content"},[t._v("- "+t._s(e))]),s("label",{staticClass:"mdui-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPlatforms,expression:"selectPlatforms"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.selectPlatforms)?t._i(t.selectPlatforms,e)>-1:t.selectPlatforms},on:{change:function(s){var a=t.selectPlatforms,i=s.target,r=!!i.checked;if(Array.isArray(a)){var c=e,n=t._i(a,c);i.checked?n<0&&(t.selectPlatforms=a.concat([c])):n>-1&&(t.selectPlatforms=a.slice(0,n).concat(a.slice(n+1)))}else t.selectPlatforms=r}}}),s("i",{staticClass:"mdui-switch-icon"})])])})),s("li",{staticClass:"mdui-subheader-inset"}),t._m(0)],2)])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{attrs:{href:"http://im.hns5j.com/"}},[s("li",{staticClass:"mdui-list-item mdui-ripple"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons"},[t._v("input")]),s("div",{staticClass:"mdui-list-item-content"},[t._v("信息化主页")])])])}],h={name:"",data:()=>({platforms:["信息平台","阳光采购","在线培训","用户反馈"],problemOfDepartments:["公司领导","总经办","总工办","市场部","人力部","工程部","成控部","财务部","法务部","投资部","二级单位","信息中心"]}),computed:{selectPlatforms:{get(){return this.$store.state.selectPlatforms},set(t){this.$store.commit("setSelectPlatforms",t)}},selectProblemOfDepartments:{get(){return this.$store.state.selectProblemOfDepartments},set(t){this.$store.commit("setSelectProblemOfDepartments",t)}}},methods:{emptySelect(t){switch(t){case"platforms":this.$store.commit("setSelectPlatforms",[]);break;case"department":this.$store.commit("setSelectProblemOfDepartments",[]);break}}}},b=h,v=(s("f341"),Object(u["a"])(b,d,f,!1,null,"504a0866",null)),y=v.exports,g={name:"app",components:{LayoutHeader:p,LayoutAside:y}},k=g,C=(s("034f"),Object(u["a"])(k,i,r,!1,null,null,null)),T=C.exports,_=s("8c4f"),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.getTbTaskList,expression:"loading.getTbTaskList"}],attrs:{id:"list"}},[s("div",{staticClass:"cacheMs"},[t._v("更新时间 - "+t._s(t._f("fmtDay")(t.cacheTime)))]),s("el-row",{staticClass:"taskWrap",attrs:{type:"flex",gutter:30}},t._l(t.taskGroup,(function(e,a){return s("el-col",{key:e.name,staticClass:"task-col",attrs:{span:t.taskGroupLength}},[s("p",{staticClass:"title"},[t._v(t._s(e.name))]),s("div",{staticClass:"taskList",class:e.name},[t._l(t.taskGroupPaging[a],(function(e){return s("el-card",{key:e.taskId,staticClass:"task",attrs:{shadow:"always","body-style":{padding:"0px"}}},[s("div",{staticClass:"top"},[s("p",{staticClass:"name"},[s("span",{domProps:{innerHTML:t._s(t.cardName(e))}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制任务 "+e.taskId,placement:"top"}},[s("i",{staticClass:"el-icon-link taskBtn",on:{click:[function(s){return s.ctrlKey||s.shiftKey||s.altKey||s.metaKey?null:t.taskBtn("copy",e)},function(s){return s.altKey?t.taskBtn("link",e):null}]}})])],1),s("p",{staticClass:"department"},[t._v(t._s(t.cardDepartment(e)))])]),s("div",{staticClass:"main"},[s("div",{staticClass:"process"},[s("div",{staticClass:"percentage"},[s("span",{staticClass:"num"},[t._v(t._s(e.process)+"%")]),t._v(" completed ")]),s("div",{staticClass:"progressBar"},[s("div",{staticClass:"bar upper",class:{succ:e.process>=100},style:{width:e.process+"%"}}),s("div",{staticClass:"bar lower"})])]),s("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)}}),s("div",{staticClass:"state"},[s("div",{staticClass:"item updated"},[s("p",{staticClass:"t"},[t._v("最近处理")]),s("p",{staticClass:"c"},[t._v(t._s(t._f("fmtDay")(e.updated)))])]),s("div",{staticClass:"item isDone"},[s("p",{staticClass:"t"},[t._v("预计完成")]),s("p",{staticClass:"c"},[t._v("-")])])]),s("span",{staticClass:"hr"})]),s("div",{staticClass:"bottom"},t._l(e.participants,(function(t){return s("div",{key:t.userId,staticClass:"people"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"top"}},[s("img",{attrs:{src:t.avatarUrl,alt:""}})])],1)})),0)])})),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.list.length&&e.page<e.max,expression:"taskList.list.length !== 0 && taskList.page < taskList.max"}],staticClass:"needMore",attrs:{type:"info",plain:""},on:{click:function(t){e.page++}}},[t._v(" 加载更多 ")]),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"底线-点击到顶",placement:"top"}},[e.page>=e.max?s("el-divider",{staticClass:"isFinish",on:{click:function(s){return t.scrollTop(e.name)}}},[s("i",{staticClass:"el-icon-finished"})]):t._e()],1)],2)])})),1)],1)},P=[],w=(s("c975"),s("fb6a"),s("0fb7"),s("450d"),s("f529")),x=s.n(w),L=s("2ef0"),j=s.n(L);function D(t,e){let s=localStorage[t];try{s=JSON.parse(s)}catch(a){s=e}return s}function $(t){return"[object Object]"===toString.call(t)}function S(...t){const e=Object.create(null);return t.forEach(t=>{t&&Object.keys(t).forEach(s=>{const a=t[s];$(a)?$(e[s])?e[s]=S(e[s],a):e[s]=S(a):e[s]=a})}),e}function K(t,e,s){t=t.toString();let a=document.createElement("textarea");a.setAttribute("readonly","readonly"),a.setAttribute("value",t),a.value=t,a.readonly="readonly",document.body.appendChild(a),a.select(),a.setSelectionRange(0,9999),document.execCommand("copy")?(document.execCommand("copy"),e&&e()):s&&s(),document.body.removeChild(a),a.remove()}var E={name:"list",data:()=>({pageNum:10,taskGroupTmp:[{name:"讨论",list:[],page:1,max:1},{name:"开发",list:[],page:1,max:1},{name:"测试",list:[],page:1,max:1},{name:"上线",list:[],page:1,max:1}],taskGroup:[]}),computed:{loading(){return this.$store.state.loading},cacheTime(){return this.$store.state.cacheTime},tbTaskList(){return this.$store.state.tbTaskList},taskGroupLength(){return Math.floor(24/Object.keys(this.taskGroup).length)},taskGroupPaging(){return this.taskGroup.map(t=>t.list.slice(0,t.page*this.pageNum))}},watch:{tbTaskList(){const t=this.tbTaskList,e=this.resetTbTaskGroup(),s=e.map(t=>t.name);t.forEach(t=>{const a=e.find(e=>e.name===t.tasklist);t.process=40*s.indexOf(t.tasklist)+(t.isDone?20:0),t.process>100&&(t.process=100),a.max=Math.ceil(a.list.length/this.pageNum),a.list.push(t)}),this.taskGroup=e}},methods:{resetTbTaskGroup(){return j.a.cloneDeep(this.taskGroupTmp)},getTbTaskList(){this.$store.dispatch("getTbTaskList")},cardName(t){let e="",s="";return t.customfieldsObj.problemOfDepartment&&(s=t.customfieldsObj.problemOfDepartment.value),t.customfieldsObj.problemOfPeople&&(e=t.customfieldsObj.problemOfPeople.value),`${"二级单位"===s?"":s} ${"二级单位"!==s&&e?"-":""} ${e}`},cardDepartment(t){return t.customfieldsObj.platform.value},taskBtn(t,e){switch(console.log("task.taskId",e),t){case"copy":K(`${location.origin}/${location.pathname}?searchKey=${encodeURIComponent(e.taskId)}`,()=>{x.a.success("复制成功")});break;case"link":window.open("https://www.teambition.com/task/"+e.taskId);break}console.log("type",t)},scrollTop(t){const e=document.querySelector("."+t);e&&e.scrollTo(0,0)},test(){console.log("11",11)}}},A=E,N=(s("b701"),s("b84d"),Object(u["a"])(A,O,P,!1,null,"0a952301",null)),G=N.exports;a["default"].use(_["a"]);const M=[{path:"/",redirect:"/list"},{path:"/list",name:"list",component:G}],I=new _["a"]({base:"",routes:M});var q=I,B=(s("e260"),s("e6cf"),s("a79d"),s("4d63"),s("5319"),s("ddb0"),s("2f62")),U=s("bc3a"),H=s.n(U),z={Api:{timeout:3e4,baseUrl:"http://api.fb.im.hns5j.com"}};function J(){let t=z;const{default:e}=s("5818");return console.log("CONFIG_ENV","prod",e),S(t,e)}var R=J();const F={baseURL:R.Api.baseUrl,timeout:6e4,headers:{"z-pass":"1qaz_hn5j_2wsx"}},V=H.a.create(F);V.interceptors.request.use(t=>t,t=>Promise.reject(t)),V.interceptors.response.use(t=>t,t=>Promise.reject(t));var W=V;function Q(t){return W.get("/tb/task/list",{params:t})}a["default"].use(B["a"]);var X=new B["a"].Store({state:{loading:{getTbTaskList:!1},searchKey:"",tbTaskList:[],cacheTime:0,selectPlatforms:[],selectProblemOfDepartments:D("selectProblemOfDepartments",[]),ajaxSend:{getTbTaskList:null}},mutations:{setSelectPlatforms(t,e){t.selectPlatforms=e,this.dispatch("getTbTaskList")},setSelectProblemOfDepartments(t,e){t.selectProblemOfDepartments=e,localStorage.selectProblemOfDepartments=JSON.stringify(e),this.dispatch("getTbTaskList")},setLoading(t,[e,s]){t.loading[e]=s},setTbTaskList(t,e){t.tbTaskList=e},setCacheTime(t,e){t.cacheTime=e},"update:searchKey"(t,e){t.searchKey=e,this.dispatch("getTbTaskList")}},actions:{getTbTaskList({commit:t,state:e}){e.ajaxSend.getTbTaskList&&e.ajaxSend.getTbTaskList.cancel("取消上次请求");const s=H.a.CancelToken;e.ajaxSend.getTbTaskList=s.source();const{searchKey:a,selectProblemOfDepartments:i,selectPlatforms:r}=e;t("setLoading",["getTbTaskList",!0]),Q({searchKey:a,selectProblemOfDepartments:i,selectPlatforms:r}).then(({data:e,config:s})=>{if(!j.a.isEqual({searchKey:a,selectProblemOfDepartments:i,selectPlatforms:r},s.params))return;if(200!==e.code)throw new Error(e.msg);a&&e.result.data.forEach(t=>{const e=new RegExp(a,"gi");t.content=t.content.replace(e,`<span class="highlight">${a}</span>`),t.customfieldsObj.problemOfPeople||console.log("",t.customfieldsObj),t.customfieldsObj.problemOfPeople.value=t.customfieldsObj.problemOfPeople.value.replace(e,`<span class="highlight">${a}</span>`)});const c=Object.freeze(e.result.data);t("setTbTaskList",c),t("setCacheTime",e.result.ms)}).catch(t=>{H.a.isCancel(t)||x.a.error("获取任务失败 "+t.message)}).finally(()=>{t("setLoading",["getTbTaskList",!1])})}},modules:{}}),Y=(s("e3ea"),s("7bc3")),Z=s.n(Y),tt=(s("bdc7"),s("aa2f")),et=s.n(tt),st=(s("a769"),s("5cc3")),at=s.n(st),it=(s("10cb"),s("f3ad")),rt=s.n(it),ct=(s("a673"),s("7b31")),nt=s.n(ct),lt=(s("be4f"),s("896a")),ot=s.n(lt),ut=(s("0c67"),s("299c")),mt=s.n(ut),pt=(s("b8e0"),s("a4c4")),dt=s.n(pt),ft=(s("f4f9"),s("c2cc")),ht=s.n(ft),bt=(s("7a0f"),s("0f6c")),vt=s.n(bt),yt=(s("de31"),s("c69e")),gt=s.n(yt),kt=(s("adec"),s("3d2d")),Ct=s.n(kt),Tt=(s("1951"),s("eedf")),_t=s.n(Tt);a["default"].prototype.$ELEMENT={size:"mini",zIndex:3e3},a["default"].use(_t.a),a["default"].use(Ct.a),a["default"].use(gt.a),a["default"].use(vt.a),a["default"].use(ht.a),a["default"].use(dt.a),a["default"].use(mt.a),a["default"].use(ot.a),a["default"].use(nt.a),a["default"].use(rt.a),a["default"].use(at.a),a["default"].use(et.a),a["default"].use(Z.a);var Ot=s("5a0c"),Pt=s.n(Ot);a["default"].filter("fmtDay",t=>Pt()(t).format("MM/DD HH:mm:ss")),s("09bd").shim(),a["default"].config.productionTip=!1,new a["default"]({router:q,store:X,render:t=>t(T)}).$mount("#app")},5818:function(t,e,s){"use strict";s.r(e),e["default"]={Api:{baseUrl:"./api"}}},"844b":function(t,e,s){},"85ec":function(t,e,s){},b701:function(t,e,s){"use strict";var a=s("52a1"),i=s.n(a);i.a},b84d:function(t,e,s){"use strict";var a=s("844b"),i=s.n(a);i.a},ef0e:function(t,e,s){},f341:function(t,e,s){"use strict";var a=s("1724"),i=s.n(a);i.a}});