(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cf4e0df"],{"4d48":function(t,e,i){t.exports=i.p+"static/img/投标报价清单.deafe83c.png"},"59ef":function(t,e,i){"use strict";i("734c")},"734c":function(t,e,i){},"91c3":function(t,e,i){"use strict";i("9a50")},"9a50":function(t,e,i){},"9ef8":function(t,e,i){},a9ae:function(t,e,i){"use strict";i("9ef8")},bb9b:function(t,e,i){"use strict";i("d6cb")},c16a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{"body-style":"padding:10px"}},[i("el-steps",{staticClass:"steps",attrs:{active:t.step,"finish-status":"success",simple:""}},[i("el-step",{staticClass:"step",attrs:{title:"📚 创建字典"},nativeOn:{click:function(e){t.step=1}}}),i("el-step",{staticClass:"step",attrs:{title:"💰 填充量价"},nativeOn:{click:function(e){t.step=2}}}),i("el-step",{staticClass:"step",attrs:{title:"🚀 完成"},nativeOn:{click:function(e){t.step=3}}})],1)],1),i("typeRow",{attrs:{tree_type:t.tree_type},on:{"update:tree_type":function(e){t.tree_type=e}}}),i("div",{staticClass:"wrap"},[i("el-button",{staticClass:"btn",attrs:{disabled:t.step<=1,icon:"el-icon-arrow-left",plain:"",type:"primary"},on:{click:function(e){t.step--}}}),i("div",{staticClass:"content"},[1==t.step&&"🛍️ 间接成本"!==t.tree_type?i("createTree",{attrs:{tree_type:t.tree_type}}):t._e(),2!=t.step&&3!=t.step||"🛍️ 间接成本"===t.tree_type?t._e():i("detailTable",{attrs:{action:2==t.step?"新增":"编辑",mode:t.mode,tree_type:t.tree_type,mainTableHeight:"550px"}}),"🛍️ 间接成本"===t.tree_type?i("table_间接成本",{attrs:{action:2==t.step?"新增":"编辑"}}):t._e()],1),i("el-button",{staticClass:"btn",attrs:{disabled:t.step>=3,plain:"",type:"primary"},on:{click:function(e){t.step++}}},[i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)},s=[],r=i("d1c2"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"createTree"},[i("el-card",{staticClass:"left",attrs:{"body-style":"padding: 10px"}},[i("el-input",{staticClass:"search",attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.treeFilter,callback:function(e){t.treeFilter=e},expression:"treeFilter"}}),i("el-scrollbar",{staticClass:"treeWrap noX"},[i("el-tree",{ref:"dictTree",attrs:{data:t.currentTree,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode,"check-on-click-node":"","node-key":"flatName","show-checkbox":""}})],1)],1),i("div",{staticClass:"center"},[i("el-tooltip",{staticClass:"item",attrs:{content:"选择字典",effect:"light",placement:"top"}},[i("el-card",{staticClass:"transferTree",nativeOn:{click:function(e){return t.transferTree(e)}}},[t._v("👉")])],1)],1),i("el-card",{staticClass:"right",attrs:{"body-style":"padding: 10px"}},[i("el-tabs",{attrs:{addable:"",type:"border-card"},on:{"tab-add":function(e){t.addPositionDialog=!0}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.positionArr,(function(e,a){return i("el-tab-pane",{key:e.label,attrs:{label:e.label,name:a.toString()}},[i("el-scrollbar",{staticClass:"treeWrap noX"},[i("el-tree",{ref:e.label+"_"+t.tree_type,refInFor:!0,staticClass:"result-tree",attrs:{data:t.currentPositionTree,"default-expand-all":!0,"expand-on-click-node":!1,"node-key":"flatName"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,s=e.data;return i("div",{staticClass:"node",class:"level-"+s.index},[i("div",{staticClass:"label",on:{click:function(e){return t.test(s)}}},[t._v(t._s(a.label))]),s.__isleaf?i("div",{staticClass:"form"},[i("el-input",{staticClass:"input",attrs:{placeholder:"预算量",size:"mini",type:"text"}}),i("el-input",{staticClass:"input",attrs:{placeholder:"预算单价",size:"mini",type:"text"}}),i("span",{staticClass:"input count"},[t._v(" 总价: "),i("u",[t._v("_______")])]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-input",{staticClass:"input",attrs:{placeholder:"责任量",size:"mini",type:"text"}}),i("el-input",{staticClass:"input",attrs:{placeholder:"责任单价",size:"mini",type:"text"}}),i("span",{staticClass:"input count"},[t._v(" 总价: "),i("u",[t._v("_______")])]),i("el-popconfirm",{attrs:{title:"复制到其他【单位工程】?"}},[i("el-button",{attrs:{slot:"reference",circle:"",plain:"",type:"primary"},slot:"reference"},[t._v("📨")])],1)],1):t._e()])}}],null,!0)})],1)],1)})),1)],1)],1),i("el-dialog",{attrs:{visible:t.addPositionDialog,title:"增加分部",width:"600px"},on:{"update:visible":function(e){t.addPositionDialog=e}}},[i("el-form",{attrs:{model:t.formPosition,"label-width":"120px"}},[i("el-form-item",{attrs:{rules:[{required:!0,message:"不能为空"}],label:"分部名称"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:t.formPosition.label,callback:function(e){t.$set(t.formPosition,"label",e)},expression:"formPosition.label"}})],1),i("el-form-item",{attrs:{label:"复制字典"}},[i("el-switch",{model:{value:t.addIsCopy,callback:function(e){t.addIsCopy=e},expression:"addIsCopy"}})],1),t.addIsCopy?i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"从分部复制"}},[i("el-form-item",{attrs:{label:"复制分部"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择需要复制的分部"},model:{value:t.formPosition.copyPosition,callback:function(e){t.$set(t.formPosition,"copyPosition","string"===typeof e?e.trim():e)},expression:"formPosition.copyPosition"}},[i("el-option",{attrs:{label:"",value:""}}),t._l(t.positionArr,(function(t){return i("el-option",{key:t.label,attrs:{label:t.label,value:t}})}))],2)],1),i("el-form-item",{attrs:{label:"复制字典"}},[i("el-checkbox-group",{model:{value:t.formPosition.copyDict,callback:function(e){t.$set(t.formPosition,"copyDict",e)},expression:"formPosition.copyDict"}},[i("el-checkbox",{attrs:{label:"📦 主要材料"}}),i("el-checkbox",{attrs:{label:"🏗️ 设备租赁"}}),i("el-checkbox",{attrs:{label:"👷 劳务分包"}}),i("el-checkbox",{attrs:{label:"🔬 专业分包"}})],1)],1)],1),i("el-tab-pane",{attrs:{label:"从模板复制"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择需要复制的模板",value:" "}},[i("el-option",{attrs:{label:"",value:""}}),i("el-option",{attrs:{label:"房建-地下室模板",value:"1"}}),i("el-option",{attrs:{label:"模板2",value:"2"}}),i("el-option",{attrs:{label:"模板3",value:"3"}}),i("el-option",{attrs:{label:"模板4",value:"4"}})],1)],1)],1):t._e()],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addPositionDialog=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addPosition}},[t._v("确 定")])],1)],1)],1)},l=[],o=(i("4de4"),i("d3b7"),i("caad"),i("2532"),i("159b"),i("25f0"),i("2ef0")),c=i.n(o),d=i("d6d5"),p=i("5afb"),u={name:"",mounted:function(){this.positionArr.push(this.getEmptyPosition("一栋"))},data:function(){return{treeFilter:"",positionArr:[],tabIndex:"0",addPositionDialog:!1,formPosition:{label:"",copyPosition:"",copyDict:[]},addIsCopy:!1}},props:{tree_type:{type:String,default:"📦 主要材料"}},computed:{currentTree:function(){switch(this.tree_type){case"📦 主要材料":return p["材料采购"].tree;case"🏗️ 设备租赁":return[];case"👷 劳务分包":return[];case"🔬 专业分包":return[];default:return[]}},currentPositionTree:{get:function(){return this.positionArr[this.tabIndex].tree[this.tree_type]},set:function(t){this.positionArr[this.tabIndex].tree[this.tree_type]=t}},currentPositionLabel:function(){return this.positionArr[this.tabIndex].label}},watch:{treeFilter:function(t){this.$refs.tree.filter(t)},tree_type:function(){this.setLeftTree()},tabIndex:function(){this.setLeftTree()}},methods:{test:function(t){console.log("11",t)},setLeftTree:function(){var t=Object(d["e"])(this.currentPositionTree);this.$refs.dictTree.setCheckedKeys(t)},getEmptyPosition:function(t){var e={label:t,tree:{"📦 主要材料":[],"🏗️ 设备租赁":[],"👷 劳务分包":[],"🔬 专业分包":[]}};return c.a.cloneDeep(e)},addPosition:function(){var t=this.formPosition,e=t.label;if(e&&!this.positionArr.includes(e)){var i=this.getEmptyPosition(e),a=t.copyPosition;a&&t.copyDict.forEach((function(t){i.tree[t]=c.a.cloneDeep(a.tree[t])})),this.positionArr.push(i),this.tabIndex=(this.positionArr.length-1).toString(),this.formPosition.label="",this.formPosition.copyPosition={},this.formPosition.copyDict=[],this.addPositionDialog=!1}},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},transferTree:function(){var t=this.$refs.dictTree.getCheckedKeys(!0),e=Object(d["f"])(this.currentTree,t);this.currentPositionTree=e}}},f=u,b=(i("59ef"),i("2877")),m=Object(b["a"])(f,n,l,!1,null,"51cec0ce",null),h=m.exports,y=i("4f2a"),v=i("c3e9"),_=i("2ad0"),g={name:"",mounted:function(){var t=this.$route.params.mode;switch(this.mode=t,t){case"新增":this.step=1;break;case"编辑":this.step=3;break}},data:function(){return{mode:"新增",tree_type:"📦 主要材料",step:1}},components:{typeRow:r["a"],createTree:h,detailTable:y["a"],"table_间接成本":v["a"],"table_变更":_["a"]}},x=g,k=(i("91c3"),Object(b["a"])(x,a,s,!1,null,"cdeb09a4",null));e["default"]=k.exports},c3e9:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("G-Table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"summary-method":t.getSummaries,"tree-props":{children:"children",hasChildren:"hasChildren"},border:"","default-expand-all":"",print:"","row-key":"费用名称","show-summary":""}},[i("el-table-column",{attrs:{label:"费用名称",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.link?i("el-link",{attrs:{type:"primary"},on:{click:function(e){return t._G.openNewTab("/table/ck/项目详情/表单/预算/查看?mode=全部")}}},[t._v(t._s(a.费用名称))]):i("span",[t._v(t._s(a.费用名称))])]}}])}),i("el-table-column",{attrs:{align:"right",label:"预算金额（元）","min-width":"160",prop:"预算金额"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-input",{staticClass:"input",attrs:{value:"新增"===t.action?"":a.预算金额}})]}}])}),i("el-table-column",{attrs:{align:"right",label:"责任成本（元）","min-width":"160",prop:"责任成本"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-input",{staticClass:"input",attrs:{value:"新增"===t.action?"":a.责任成本,align:"right"}})]}}])}),i("el-table-column",{attrs:{align:"right",label:"目标成本（元）","min-width":"160",prop:"责任成本"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-input",{staticClass:"input",attrs:{value:"新增"===t.action?"":(.9*a.责任成本).toFixed(2),align:"right"}})]}}])})],1)],1)},s=[],r=(i("d3b7"),i("159b"),i("d81d"),i("a9e3"),i("13d5"),i("b680"),{name:"",data:function(){return{tableData:[{index:2,"费用名称":"间接成本","预算金额":"--","责任成本":7878407.84,"备注":"",children:[{index:1,"费用名称":"管理人员工资","预算金额":"--","责任成本":1909600,"备注":""},{index:2,"费用名称":"安全文明施工费","预算金额":2611411.39,"责任成本":1370371.05,"备注":""},{index:3,"费用名称":"项目水电费","预算金额":121458.38,"责任成本":510937.42,"备注":""},{index:4,"费用名称":"财务费用","预算金额":"--","责任成本":1021874.84,"备注":""},{index:5,"费用名称":"项目不可预见费","预算金额":"--","责任成本":1532812.26,"备注":""},{index:6,"费用名称":"保险等费用","预算金额":126115.62,"责任成本":1532812.26,"备注":""}]}]}},props:{action:String},methods:{getSummaries:function(t){var e=t.columns,i=t.data,a=[];return e.forEach((function(t,e){if(0!==e){var s=i.map((function(e){return Number(e[t.property])}));s.every((function(t){return isNaN(t)}))?a[e]="N/A":(a[e]=s.reduce((function(t,e){var i=Number(e);return isNaN(i)?t:t+e}),0),1===e||2===e?a[e]=a[e].toFixed(2)+" 元":3===e?a[e]=(82620887.74*.9).toFixed(2)+"元":4===e?a[e]=(82620887.74*.87).toFixed(2)+"元":5===e&&(a[e]=2478626.6322.toFixed(2)+"元"))}else a[e]="合计"})),a}}}),n=r,l=(i("a9ae"),i("2877")),o=Object(l["a"])(n,a,s,!1,null,"67cce886",null);e["a"]=o.exports},d1c2:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("el-row",{staticClass:"control"},[a("div",{staticClass:"left"},[a("b",[t._v("🏠项目名称：")]),a("span",[t._v(t._s(t.prjInfo.项目全称))])]),a("div",{staticClass:"right"},[a("el-link",{staticStyle:{display:"inline-block","margin-right":"40px"},nativeOn:{click:function(e){t.dialogVisible=!0}}},[t._v("📁 投标报价清单")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-radio-group",{model:{value:t.sTree_type,callback:function(e){t.sTree_type=e},expression:"sTree_type"}},[a("el-radio",{attrs:{label:"📦 主要材料"}},[t._v("📦 主要材料")]),a("el-radio",{attrs:{label:"🏗️ 设备租赁"}},[t._v("🏗️ 设备租赁")]),a("el-radio",{attrs:{label:"👷 劳务分包"}},[t._v("👷 劳务分包")]),a("el-radio",{attrs:{label:"🔬 专业分包"}},[t._v("🔬 专业分包")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-radio",{attrs:{label:"🛍️ 间接成本"}},[t._v("🛍️ 间接成本")])],1),t.$slots.default?a("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._t("default")],2)])],1),a("el-dialog",{attrs:{title:"📁 投标报价清单",visible:t.dialogVisible,fullscreen:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("Tips",[a("p",[t._v("1.文件自项目交底功能抓取")]),a("p",[t._v("2.文件可在线打开预览")])]),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("4d48")}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},s=[],r={name:"",data:function(){return{dialogVisible:!1}},props:{tree_type:String},computed:{prjInfo:function(){return this.$store.getters.prjInfo},sTree_type:{get:function(){return this.tree_type},set:function(t){this.$emit("update:tree_type",t)}}}},n=r,l=(i("bb9b"),i("2877")),o=Object(l["a"])(n,a,s,!1,null,"f74575b8",null);e["a"]=o.exports},d6cb:function(t,e,i){}}]);