(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ed719bf"],{"228f":function(t,e,n){"use strict";n("489a")},"489a":function(t,e,n){},"7a97":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"query-online"}},[n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading.getIndex,expression:"loading.getIndex",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"main",attrs:{"element-loading-text":"正在读取"}},[n("el-card",[n("span",{on:{click:t.toogleDev}},[t._v("更新时间:")]),t._v(" "),n("span",{staticClass:"time",staticStyle:{float:"right"}},[t._v(t._s(t._f("timeFmt")(t.lastSuccTime)))])]),t._v(" "),n("el-card",{staticClass:"box online"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",{staticClass:"tag-header",attrs:{type:"info",size:"mini"}},[t._v(t._s(t.filterByRegionAndOffline.length))]),t._v("全部离线\n                ")],1),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.copyResult("offline",t.filterByRegionAndOffline)}}},[t._v("复制")])],1),t._v(" "),t._l(t.filterByRegionAndOffline,(function(e){return n("div",{key:e._id,staticClass:"text item"},[t.dev?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                        "+t._s(e.region.encoders.length)+" * "+t._s(t.mapEncoder(e).all)+"\n                        "),n("br"),t._v("\n                        自平台在线数："+t._s(e.region.camerasState.count.online)+" / "+t._s(e.region.camerasState.count.total)+"\n                        "),n("br"),t._v("\n                        海康威视平台："+t._s(e.region.camerasState.count_hkvs.online)+" / "+t._s(e.region.camerasState.count_hkvs.total)+"\n                        "),n("br"),t._v("\n                        "+t._s(t.mapEncoder(e).id)+"\n                    ")]),t._v(" "),n("el-tag",{staticClass:"tag-encoder",attrs:{size:"mini"}},[t._v(t._s(t.mapEncoder(e).sort))])],1):t._e(),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tipText(e),placement:"top"}},[n("el-tag",{staticClass:"tag",attrs:{type:"danger",size:"mini"}},[t._v(t._s(e.region.camerasState.percent_hkvs.online+"%"))])],1),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.fullName,placement:"top"}},[n("span",{staticClass:"name"},[t._v(t._s(e.shortName))])]),t._v(" "),n("el-tag",{staticClass:"branch",attrs:{type:"info",size:"mini"}},[t._v(t._s(e.branch))]),t._v(" "),n("span",{staticClass:"des"},[t._v(t._s(e.des))])],1)}))],2),t._v(" "),n("el-card",{staticClass:"box online"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",{staticClass:"tag-header",attrs:{type:"info",size:"mini"}},[t._v(t._s(t.filterByRegionAndPartOfOnline.length))]),t._v("部分离线\n                ")],1),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.copyResult("partOfOnline",t.filterByRegionAndPartOfOnline)}}},[t._v("复制")])],1),t._v(" "),t._l(t.filterByRegionAndPartOfOnline,(function(e){return n("div",{key:e._id,staticClass:"text item"},[t.dev?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                        "+t._s(e.region.encoders.length)+" * "+t._s(t.mapEncoder(e).all)+"\n                        "),n("br"),t._v("\n                        自平台在线数："+t._s(e.region.camerasState.count.online)+" / "+t._s(e.region.camerasState.count.total)+"\n                        "),n("br"),t._v("\n                        海康威视平台："+t._s(e.region.camerasState.count_hkvs.online)+" / "+t._s(e.region.camerasState.count_hkvs.total)+"\n                        "),n("br"),t._v("\n                        "+t._s(t.mapEncoder(e).id)+"\n                    ")]),t._v(" "),n("el-tag",{staticClass:"tag-encoder",attrs:{size:"mini"}},[t._v(t._s(t.mapEncoder(e).sort))])],1):t._e(),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tipText(e,"partOnline"),placement:"top"}},[n("el-tag",{staticClass:"tag",attrs:{type:"warning",size:"mini"}},[t._v(t._s((0===e.region.camerasState.percent.online?e.region.camerasState.percent_hkvs.online:e.region.camerasState.percent.online)+"%"))])],1),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.fullName,placement:"top"}},[n("span",{staticClass:"name"},[t._v(t._s(e.shortName))])]),t._v(" "),n("el-tag",{staticClass:"branch",attrs:{type:"info",size:"mini"}},[t._v(t._s(e.branch))]),t._v(" "),n("span",{staticClass:"des"},[t._v(t._s(e.des))])],1)}))],2),t._v(" "),n("el-card",{staticClass:"box online"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",{staticClass:"tag-header",attrs:{type:"info",size:"mini"}},[t._v(t._s(t.filterByRegionAndOnline.length))]),t._v("全部在线\n                ")],1),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.copyResult("online",t.filterByRegionAndOnline)}}},[t._v("复制")])],1),t._v(" "),t._l(t.filterByRegionAndOnline,(function(e){return n("div",{key:e._id,staticClass:"text item"},[t.dev?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                        "+t._s(e.region.encoders.length)+" * "+t._s(t.mapEncoder(e).all)+"\n                        "),n("br"),t._v("\n                        自平台在线数："+t._s(e.region.camerasState.count.online)+" / "+t._s(e.region.camerasState.count.total)+"\n                        "),n("br"),t._v("\n                        海康威视平台："+t._s(e.region.camerasState.count_hkvs.online)+" / "+t._s(e.region.camerasState.count_hkvs.total)+"\n                        "),n("br"),t._v("\n                        "+t._s(t.mapEncoder(e).id)+"\n                    ")]),t._v(" "),n("el-tag",{staticClass:"tag-encoder",attrs:{size:"mini"}},[t._v(t._s(t.mapEncoder(e).sort))])],1):t._e(),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tipText(e),placement:"top"}},[n("el-tag",{staticClass:"tag",attrs:{type:"success",size:"mini"}},[t._v(t._s(e.region.camerasState.percent_hkvs.online+"%"))])],1),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.fullName,placement:"top"}},[n("span",{staticClass:"name"},[t._v(t._s(e.shortName))])]),t._v(" "),n("el-tag",{staticClass:"branch",attrs:{type:"info",size:"mini"}},[t._v(t._s(e.branch))]),t._v(" "),n("span",{staticClass:"des"},[t._v(t._s(e.des))])],1)}))],2),t._v(" "),n("el-divider",[n("i",{staticClass:"el-icon-video-camera"})]),t._v(" "),n("el-card",{staticClass:"box install"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",{staticClass:"tag-header",attrs:{type:"info",size:"mini"}},[t._v(t._s(t.filterByNotRegionAndNotInstall.length))]),t._v("未接入 - 未安装\n                ")],1),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.copyResult("notInstall",t.filterByNotRegionAndNotInstall)}}},[t._v("复制")])],1),t._v(" "),t._l(t.filterByNotRegionAndNotInstall,(function(e){return n("div",{key:e._id,staticClass:"text item"},[n("span",[t._v(t._s(e.shortName))]),t._v(" "),n("el-tag",{staticClass:"time",attrs:{type:"info",size:"mini"}},[t._v(t._s(t._f("dayFmt")(e.meta.createdAt)))])],1)}))],2),t._v(" "),n("el-card",{staticClass:"box install"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",{staticClass:"tag-header",attrs:{type:"info",size:"mini"}},[t._v(t._s(t.filterByNotRegionAndInstall.length))]),t._v("未接入 - 已安装\n                ")],1),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.copyResult("install",t.filterByNotRegionAndInstall)}}},[t._v("复制")])],1),t._v(" "),t._l(t.filterByNotRegionAndInstall,(function(e){return n("div",{key:e._id,staticClass:"text item"},[n("span",[t._v(t._s(e.shortName))]),t._v(" "),n("el-tag",{staticClass:"time",attrs:{type:"info",size:"mini"}},[t._v(t._s(t._f("dayFmt")(e.meta.createdAt)))])],1)}))],2)],1)])},i=[],s=n("7cf8"),r=(n("ed08"),{name:"query-online",mounted:function(){this.get(),this.getSyncTime()},data:function(){return{loading:{getIndex:!1},list:[],lastSuccTime:0,dev:!1}},computed:{filterByRegion:function(){return this.list.filter((function(t){return t.regionUuid&&0!==t.region.encoderUuids.length}))},filterByRegionAndOnline:function(){return this.filterByRegion.filter((function(t){return 100===t.region.camerasState.percent_hkvs.online&&(100===t.region.camerasState.percent.online||0===t.region.camerasState.percent.online)}))},filterByRegionAndPartOfOnline:function(){return this.filterByRegion.filter((function(t){return t.region.camerasState.percent_hkvs.online<100&&t.region.camerasState.percent_hkvs.online>0||100===t.region.camerasState.percent_hkvs.online&&t.region.camerasState.percent.online<100&&t.region.camerasState.percent.online>0}))},filterByRegionAndOffline:function(){return this.filterByRegion.filter((function(t){return 0===t.region.camerasState.percent_hkvs.online||"-"===t.region.camerasState.percent_hkvs.online}))},filterByNotRegion:function(){return this.list.filter((function(t){return!t.regionUuid||0===t.region.encoderUuids.length}))},filterByNotRegionAndInstall:function(){return this.filterByNotRegion.filter((function(t){return t.install}))},filterByNotRegionAndNotInstall:function(){return this.filterByNotRegion.filter((function(t){return!t.install}))}},methods:{mapEncoder:function(t){if(!t.region.encoders[0])return{id:"",sort:"",all:""};var e={id:t.region.encoders[0].encoderUuid,sort:"",all:""};switch(t.region.encoders[0].encoderModel){case 134742528:e.sort="海",e.all="海康设备";break;case 134747648:e.sort="E",e.all="海康eHome设备";break;case 143659264:e.sort="O",e.all="ONVIF设备";break;case 200867584:e.sort="国",e.all="国标设备";break}return e},tipText:function(t,e){return"partOnline"===e?0===t.region.camerasState.count.online?"".concat(t.region.camerasState.count_hkvs.online," / ").concat(t.region.camerasState.count_hkvs.total):"".concat(t.region.camerasState.count.online," / ").concat(t.region.camerasState.count.total):"".concat(t.region.camerasState.count_hkvs.online," / ").concat(t.region.camerasState.count_hkvs.total)},getSyncTime:function(){var t=this;Object(s["q"])().then((function(e){t.lastSuccTime=e.result.lastSuccTime})).catch((function(e){t.$message.error({message:"获取更新时间错误 ".concat(e.message)})})).finally((function(){}))},get:function(){var t=this;this.loading.getIndex||(this.loading.getIndex=!0,Object(s["o"])().then((function(e){t.list=e.result})).catch((function(e){t.$message.error({message:"下载错误 ".concat(e.message),duration:0})})).finally((function(){t.loading.getIndex=!1})))},toogleDev:function(){console.log("123",123),this.dev=!this.dev},copyResult:function(t,e){console.log("arr",e);var n=e.reduce((function(t,e){return t+e.shortName+"\r\n"}),"");switch(t){case"online":n="以下项目的监控摄像头全部在线。\r\n\r\n".concat(n);break;case"partOfOnline":n="以下项目的监控摄像头部分离线，请以下项目部检查监控设备。\r\n\r\n".concat(n);break;case"offline":n="以下项目的监控摄像头全部离线，请以下项目部检查监控设备。\r\n\r\n".concat(n);break;case"notInstall":n="以下项目的未安装监控。\r\n\r\n".concat(n);break;case"install":n="以下项目的已安装监控，但未接入公司监控平台。\r\n\r\n".concat(n);break;default:break}n+="\r\n查看摄像头实时状态可访问\r\n".concat(window.location.href),this.GFn.copy(n)}}}),o=r,l=(n("228f"),n("2877")),c=Object(l["a"])(o,a,i,!1,null,"c84c6e6e",null);e["default"]=c.exports}}]);