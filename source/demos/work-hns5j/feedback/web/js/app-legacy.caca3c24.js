(function(t){function e(e){for(var a,r,c=e[0],o=e[1],l=e[2],m=0,f=[];m<c.length;m++)r=c[m],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==n[o]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},n={app:0},i=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),n=s.n(a);n.a},1724:function(t,e,s){},2832:function(t,e,s){"use strict";var a=s("ef0e"),n=s.n(a);n.a},"52a1":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("el-container",{staticClass:"layout"},[s("el-header",{staticClass:"layout-header"},[s("LayoutHeader")],1),s("el-container",{staticClass:"layout-content"},[s("el-aside",{staticClass:"layout-aside",attrs:{width:"240px"}},[s("LayoutAside")],1),s("el-main",{staticClass:"layout-main"},[s("router-view")],1)],1)],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[t._m(0),s("div",{staticClass:"search"},[s("div",{staticClass:"mdui-textfield"},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchKey,expression:"searchKey",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text",placeholder:"搜索内容或链接"},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logo"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("live_help")])]),s("span",[t._v("反馈平台")])])}],o=(s("d3b7"),s("ac1f"),s("25f0"),s("466d"),{name:"",mounted:function(){var t=this.$route.query.searchKey,e=void 0===t?"":t;this.$store.commit("update:searchKey",e)},data:function(){return{searchKeyTimer:0}},computed:{searchKey:{get:function(){return this.$store.state.searchKey},set:function(t){var e=this;clearTimeout(this.searchKeyTimer),this.searchKeyTimer=setTimeout((function(){var s=t,a=t.match(/(?<=searchKey=)\w{24}/);a&&(s=a.toString());var n=t.match(/(?<=task\/)\w{24}/);n&&(s=n.toString()),e.$store.commit("update:searchKey",s),"/list"===e.$route.path&&e.$route.query.searchKey===s||e.$router.push({path:"/list",query:{searchKey:s}})}),100)}}}}),l=o,u=(s("2832"),s("2877")),m=Object(u["a"])(l,r,c,!1,null,"75530767",null),f=m.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"aside"}},[s("ul",{staticClass:"mdui-list mdui-collapse mdui-list-dense",attrs:{"mdui-collapse":""}},[s("li",{staticClass:"mdui-subheader-inset optionTitle"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons",staticStyle:{"margin-bottom":"2px"}},[t._v("fullscreen")]),t._v(" 提出部门 "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清空筛选",placement:"top"}},[s("span",{staticClass:"emptySelectBtn",on:{click:function(e){return t.emptySelect("department")}}},[t._v("×")])])],1),t._l(t.problemOfDepartments,(function(e){return s("li",{key:e,staticClass:"mdui-list-item mdui-ripple options"},[s("div",{staticClass:"mdui-list-item-content"},[t._v("- "+t._s(e))]),s("label",{staticClass:"mdui-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectProblemOfDepartments,expression:"selectProblemOfDepartments"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.selectProblemOfDepartments)?t._i(t.selectProblemOfDepartments,e)>-1:t.selectProblemOfDepartments},on:{change:function(s){var a=t.selectProblemOfDepartments,n=s.target,i=!!n.checked;if(Array.isArray(a)){var r=e,c=t._i(a,r);n.checked?c<0&&(t.selectProblemOfDepartments=a.concat([r])):c>-1&&(t.selectProblemOfDepartments=a.slice(0,c).concat(a.slice(c+1)))}else t.selectProblemOfDepartments=i}}}),s("i",{staticClass:"mdui-switch-icon"})])])})),s("li",{staticClass:"mdui-subheader-inset optionTitle"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons",staticStyle:{"margin-bottom":"2px"}},[t._v("star")]),t._v(" 问题平台 "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清空筛选",placement:"top"}},[s("span",{staticClass:"emptySelectBtn",on:{click:function(e){return t.emptySelect("platforms")}}},[t._v("×")])])],1),t._l(t.platforms,(function(e){return s("li",{key:e,staticClass:"mdui-list-item mdui-ripple options platform"},[s("div",{staticClass:"mdui-list-item-content"},[t._v("- "+t._s(e))]),s("label",{staticClass:"mdui-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPlatforms,expression:"selectPlatforms"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.selectPlatforms)?t._i(t.selectPlatforms,e)>-1:t.selectPlatforms},on:{change:function(s){var a=t.selectPlatforms,n=s.target,i=!!n.checked;if(Array.isArray(a)){var r=e,c=t._i(a,r);n.checked?c<0&&(t.selectPlatforms=a.concat([r])):c>-1&&(t.selectPlatforms=a.slice(0,c).concat(a.slice(c+1)))}else t.selectPlatforms=i}}}),s("i",{staticClass:"mdui-switch-icon"})])])})),s("li",{staticClass:"mdui-subheader-inset"}),t._m(0)],2)])},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{attrs:{href:"http://im.hns5j.com/"}},[s("li",{staticClass:"mdui-list-item mdui-ripple"},[s("i",{staticClass:"mdui-list-item-icon mdui-icon material-icons"},[t._v("input")]),s("div",{staticClass:"mdui-list-item-content"},[t._v("信息化主页")])])])}],h={name:"",data:function(){return{platforms:["信息平台","阳光采购","在线培训","用户反馈"],problemOfDepartments:["公司领导","总经办","总工办","市场部","人力部","工程部","成控部","财务部","法务部","投资部","二级单位","信息中心"]}},computed:{selectPlatforms:{get:function(){return this.$store.state.selectPlatforms},set:function(t){this.$store.commit("setSelectPlatforms",t)}},selectProblemOfDepartments:{get:function(){return this.$store.state.selectProblemOfDepartments},set:function(t){this.$store.commit("setSelectProblemOfDepartments",t)}}},methods:{emptySelect:function(t){switch(t){case"platforms":this.$store.commit("setSelectPlatforms",[]);break;case"department":this.$store.commit("setSelectProblemOfDepartments",[]);break}}}},b=h,v=(s("f341"),Object(u["a"])(b,p,d,!1,null,"504a0866",null)),y=v.exports,g={name:"app",components:{LayoutHeader:f,LayoutAside:y}},k=g,C=(s("034f"),Object(u["a"])(k,n,i,!1,null,null,null)),T=C.exports,_=s("8c4f"),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.getTbTaskList,expression:"loading.getTbTaskList"}],attrs:{id:"list"}},[s("div",{staticClass:"cacheMs"},[t._v("更新时间 - "+t._s(t._f("fmtDay")(t.cacheTime)))]),s("el-row",{staticClass:"taskWrap",attrs:{type:"flex",gutter:30}},t._l(t.taskGroup,(function(e,a){return s("el-col",{key:e.name,staticClass:"task-col",attrs:{span:t.taskGroupLength}},[s("p",{staticClass:"title"},[t._v(t._s(e.name))]),s("div",{staticClass:"taskList",class:e.name},[t._l(t.taskGroupPaging[a],(function(e){return s("el-card",{key:e.taskId,staticClass:"task",attrs:{shadow:"always","body-style":{padding:"0px"}}},[s("div",{staticClass:"top"},[s("p",{staticClass:"name"},[s("span",{domProps:{innerHTML:t._s(t.cardName(e))}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制任务 "+e.taskId,placement:"top"}},[s("i",{staticClass:"el-icon-link taskBtn",on:{click:[function(s){return s.ctrlKey||s.shiftKey||s.altKey||s.metaKey?null:t.taskBtn("copy",e)},function(s){return s.altKey?t.taskBtn("link",e):null}]}})])],1),s("p",{staticClass:"department"},[t._v(t._s(t.cardDepartment(e)))])]),s("div",{staticClass:"main"},[s("div",{staticClass:"process"},[s("div",{staticClass:"percentage"},[s("span",{staticClass:"num"},[t._v(t._s(e.process)+"%")]),t._v(" completed ")]),s("div",{staticClass:"progressBar"},[s("div",{staticClass:"bar upper",class:{succ:e.process>=100},style:{width:e.process+"%"}}),s("div",{staticClass:"bar lower"})])]),s("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)}}),s("div",{staticClass:"state"},[s("div",{staticClass:"item updated"},[s("p",{staticClass:"t"},[t._v("最近处理")]),s("p",{staticClass:"c"},[t._v(t._s(t._f("fmtDay")(e.updated)))])]),s("div",{staticClass:"item isDone"},[s("p",{staticClass:"t"},[t._v("预计完成")]),s("p",{staticClass:"c"},[t._v("-")])])]),s("span",{staticClass:"hr"})]),s("div",{staticClass:"bottom"},t._l(e.participants,(function(t){return s("div",{key:t.userId,staticClass:"people"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"top"}},[s("img",{attrs:{src:t.avatarUrl,alt:""}})])],1)})),0)])})),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.list.length&&e.page<e.max,expression:"taskList.list.length !== 0 && taskList.page < taskList.max"}],staticClass:"needMore",attrs:{type:"info",plain:""},on:{click:function(t){e.page++}}},[t._v(" 加载更多 ")]),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"底线-点击到顶",placement:"top"}},[e.page>=e.max?s("el-divider",{staticClass:"isFinish",on:{click:function(s){return t.scrollTop(e.name)}}},[s("i",{staticClass:"el-icon-finished"})]):t._e()],1)],2)])})),1)],1)},P=[],w=(s("99af"),s("7db0"),s("4160"),s("c975"),s("d81d"),s("fb6a"),s("b0c0"),s("b64b"),s("159b"),s("0fb7"),s("450d"),s("f529")),x=s.n(w),L=s("2ef0"),j=s.n(L);s("53ca");function D(t,e){var s=localStorage[t];try{s=JSON.parse(s)}catch(a){s=e}return s}function S(t){return"[object Object]"===toString.call(t)}function K(){for(var t=Object.create(null),e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.forEach((function(e){e&&Object.keys(e).forEach((function(s){var a=e[s];S(a)?S(t[s])?t[s]=K(t[s],a):t[s]=K(a):t[s]=a}))})),t}function $(t,e,s){t=t.toString();var a=document.createElement("textarea");a.setAttribute("readonly","readonly"),a.setAttribute("value",t),a.value=t,a.readonly="readonly",document.body.appendChild(a),a.select(),a.setSelectionRange(0,9999),document.execCommand("copy")?(document.execCommand("copy"),e&&e()):s&&s(),document.body.removeChild(a),a.remove()}var E={name:"list",data:function(){return{pageNum:10,taskGroupTmp:[{name:"讨论",list:[],page:1,max:1},{name:"开发",list:[],page:1,max:1},{name:"测试",list:[],page:1,max:1},{name:"上线",list:[],page:1,max:1}],taskGroup:[]}},computed:{loading:function(){return this.$store.state.loading},cacheTime:function(){return this.$store.state.cacheTime},tbTaskList:function(){return this.$store.state.tbTaskList},taskGroupLength:function(){return Math.floor(24/Object.keys(this.taskGroup).length)},taskGroupPaging:function(){var t=this;return this.taskGroup.map((function(e){return e.list.slice(0,e.page*t.pageNum)}))}},watch:{tbTaskList:function(){var t=this,e=this.tbTaskList,s=this.resetTbTaskGroup(),a=s.map((function(t){return t.name}));e.forEach((function(e){var n=s.find((function(t){return t.name===e.tasklist}));e.process=40*a.indexOf(e.tasklist)+(e.isDone?20:0),e.process>100&&(e.process=100),n.max=Math.ceil(n.list.length/t.pageNum),n.list.push(e)})),this.taskGroup=s}},methods:{resetTbTaskGroup:function(){return j.a.cloneDeep(this.taskGroupTmp)},getTbTaskList:function(){this.$store.dispatch("getTbTaskList")},cardName:function(t){var e="",s="";return t.customfieldsObj.problemOfDepartment&&(s=t.customfieldsObj.problemOfDepartment.value),t.customfieldsObj.problemOfPeople&&(e=t.customfieldsObj.problemOfPeople.value),"".concat("二级单位"===s?"":s," ").concat("二级单位"!==s&&e?"-":""," ").concat(e)},cardDepartment:function(t){return t.customfieldsObj.platform.value},taskBtn:function(t,e){switch(console.log("task.taskId",e),t){case"copy":$("".concat(location.origin,"/").concat(location.pathname,"?searchKey=").concat(encodeURIComponent(e.taskId)),(function(){x.a.success("复制成功")}));break;case"link":window.open("https://www.teambition.com/task/".concat(e.taskId));break}console.log("type",t)},scrollTop:function(t){var e=document.querySelector(".".concat(t));e&&e.scrollTo(0,0)},test:function(){console.log("11",11)}}},A=E,N=(s("b701"),s("b84d"),Object(u["a"])(A,O,P,!1,null,"0a952301",null)),G=N.exports;a["default"].use(_["a"]);var M=[{path:"/",redirect:"/list"},{path:"/list",name:"list",component:G}],I=new _["a"]({base:"",routes:M}),q=I,B=(s("dca8"),s("4d63"),s("5319"),s("3835")),U=s("2f62"),H=s("bc3a"),z=s.n(H),J={Api:{timeout:3e4,baseUrl:"http://api.fb.im.hns5j.com"}};function R(){var t=J,e=s("5818"),a=e.default;return console.log("CONFIG_ENV","prod",a),K(t,a)}var F=R(),V={baseURL:F.Api.baseUrl,timeout:6e4,headers:{"z-pass":"1qaz_hn5j_2wsx"}},W=z.a.create(V);W.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),W.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var Q=W;function X(t){return Q.get("/tb/task/list",{params:t})}a["default"].use(U["a"]);var Y=new U["a"].Store({state:{loading:{getTbTaskList:!1},searchKey:"",tbTaskList:[],cacheTime:0,selectPlatforms:[],selectProblemOfDepartments:D("selectProblemOfDepartments",[]),ajaxSend:{getTbTaskList:null}},mutations:{setSelectPlatforms:function(t,e){t.selectPlatforms=e,this.dispatch("getTbTaskList")},setSelectProblemOfDepartments:function(t,e){t.selectProblemOfDepartments=e,localStorage.selectProblemOfDepartments=JSON.stringify(e),this.dispatch("getTbTaskList")},setLoading:function(t,e){var s=Object(B["a"])(e,2),a=s[0],n=s[1];t.loading[a]=n},setTbTaskList:function(t,e){t.tbTaskList=e},setCacheTime:function(t,e){t.cacheTime=e},"update:searchKey":function(t,e){t.searchKey=e,this.dispatch("getTbTaskList")}},actions:{getTbTaskList:function(t){var e=t.commit,s=t.state;s.ajaxSend.getTbTaskList&&s.ajaxSend.getTbTaskList.cancel("取消上次请求");var a=z.a.CancelToken;s.ajaxSend.getTbTaskList=a.source();var n=s.searchKey,i=s.selectProblemOfDepartments,r=s.selectPlatforms;e("setLoading",["getTbTaskList",!0]),X({searchKey:n,selectProblemOfDepartments:i,selectPlatforms:r}).then((function(t){var s=t.data,a=t.config;if(j.a.isEqual({searchKey:n,selectProblemOfDepartments:i,selectPlatforms:r},a.params)){if(200!==s.code)throw new Error(s.msg);n&&s.result.data.forEach((function(t){var e=new RegExp(n,"gi");t.content=t.content.replace(e,'<span class="highlight">'.concat(n,"</span>")),t.customfieldsObj.problemOfPeople||console.log("",t.customfieldsObj),t.customfieldsObj.problemOfPeople.value=t.customfieldsObj.problemOfPeople.value.replace(e,'<span class="highlight">'.concat(n,"</span>"))}));var c=Object.freeze(s.result.data);e("setTbTaskList",c),e("setCacheTime",s.result.ms)}})).catch((function(t){z.a.isCancel(t)||x.a.error("获取任务失败 ".concat(t.message))})).finally((function(){e("setLoading",["getTbTaskList",!1])}))}},modules:{}}),Z=(s("e3ea"),s("7bc3")),tt=s.n(Z),et=(s("bdc7"),s("aa2f")),st=s.n(et),at=(s("a769"),s("5cc3")),nt=s.n(at),it=(s("10cb"),s("f3ad")),rt=s.n(it),ct=(s("a673"),s("7b31")),ot=s.n(ct),lt=(s("be4f"),s("896a")),ut=s.n(lt),mt=(s("0c67"),s("299c")),ft=s.n(mt),pt=(s("b8e0"),s("a4c4")),dt=s.n(pt),ht=(s("f4f9"),s("c2cc")),bt=s.n(ht),vt=(s("7a0f"),s("0f6c")),yt=s.n(vt),gt=(s("de31"),s("c69e")),kt=s.n(gt),Ct=(s("adec"),s("3d2d")),Tt=s.n(Ct),_t=(s("1951"),s("eedf")),Ot=s.n(_t);a["default"].prototype.$ELEMENT={size:"mini",zIndex:3e3},a["default"].use(Ot.a),a["default"].use(Tt.a),a["default"].use(kt.a),a["default"].use(yt.a),a["default"].use(bt.a),a["default"].use(dt.a),a["default"].use(ft.a),a["default"].use(ut.a),a["default"].use(ot.a),a["default"].use(rt.a),a["default"].use(nt.a),a["default"].use(st.a),a["default"].use(tt.a);s("4de4");var Pt=s("5a0c"),wt=s.n(Pt);a["default"].filter("fmtDay",(function(t){return wt()(t).format("MM/DD HH:mm:ss")})),s("09bd").shim(),a["default"].config.productionTip=!1,new a["default"]({router:q,store:Y,render:function(t){return t(T)}}).$mount("#app")},5818:function(t,e,s){"use strict";s.r(e),e["default"]={Api:{baseUrl:"./api"}}},"844b":function(t,e,s){},"85ec":function(t,e,s){},b701:function(t,e,s){"use strict";var a=s("52a1"),n=s.n(a);n.a},b84d:function(t,e,s){"use strict";var a=s("844b"),n=s.n(a);n.a},ef0e:function(t,e,s){},f341:function(t,e,s){"use strict";var a=s("1724"),n=s.n(a);n.a}});